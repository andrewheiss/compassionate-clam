{
  "hash": "6cc499d92da3c4ae18adacf600224e31",
  "result": {
    "markdown": "---\ntitle: \"Data cleaning\"\nauthor: \"Meng Ye\"\ndate: \"2023-03-28\"\nformat:\n  html: \n    code-fold: show\nlanguage: \n  title-block-published: \"Last updated\"\n---\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(targets)\nlibrary(here)\nlibrary(lubridate)\nlibrary(sf)\nlibrary(mapchina)\n\n# Point to the _targets folder location since this qmd is in a subfolder\ntar_config_set(store = here::here('_targets'),\n               script = here::here('_targets.R'))\n\n# Load targets\nongo <- tar_read(ongo)\n```\n:::\n\n\n\n# Documentation of the pre-processing of scraped data \n\nThe inspected raw data is the version derived after inspecting the scraped csv file against the source website. The blank lines in the scraped csv file are from ROs^[RO/ro = representative office of ONGOs] that have been de-registered. [The website](https://ngo.mps.gov.cn/ngo/portal/toInfogs.do) keep their names in the general list but their profiles are all blank now. \n\nA couple of scraping errors have also been corrected in the process. That is cases where the RO is active but shown as blank rows in the scraped. I manually added those rows back.  \n\nFor those that already been de-registered, I added back their `index`, `ro_name`, and `ro_id`, and generated a dichotomous indicator that they are no more \"active\" in the `still_active` column. \n\nFor the `still_active` variable, the values are manually input for the blank lines. After checking against the official website, `FALSE` for those have indeed de-register and `TRUE` for those that turned out to be parsing errors. The rest NAs will be recoded to `TRUE` in data cleaning. \n\nAfter the cross-checking process, the index number of ROs in our dataset is the same as the index in the official database as of 2022-10-04.\n\nThe following columns are also manually coded:\n\n- `home`: home county or region of the ONGO. Not using the name \"country\" to be flexible enough to denote, Hong Kong, Macau and Taiwan\n\n- `psu_level`: dummy variable indicating whether the official sponsoring unit (for registration and annual audit) is at the national or local level. \n\n  It is clearly correlated with `geo_scope_num`, but should be a mediating factor for the relationship we are examining. \n\n- `ro_count`: There are cases where ONGOs are not granted to operate across China, so they register multiple ROs to cover enough number of provinces where they need to work. We surely want to include this variable because it is directly correlated with `geo_scope_num` \n\n  A related `multiple_index` is an index number created to identify siblings, in the form of 100-1, 100-2...(starting from 100 to ensure all have three digits) `NA` for ONGOs only having one RO. Note there can be cases where one of the siblings has been de-registered, but only several. \n\n- `local_aim`: There are cases where the aim/mission of the ONGO is attached to a locality. So I created this dummy to indicate such situation. *However,* there seems to be some inconsistency in different ONGO's choices whether to use a location name in their work field. Also, it might be the case that the location limitation is added as requested by the authority. So probably should not use this variable. \n\n- `Index`: Index number larger than 700 are ROs that were active at time of data scraping (Jan. 2022) but have been deregistered as of Oct. 2022. \n\n- `work_field`: original mission statement in Chinese. The name \"field\" is chosen for the moment, because it seems \"area\" is more easily to be confused with the geographical scope. It is not called \"mission\" to differentiate from the mission of the mother organization which is not subject to approval of the authority. Also, the statement of the work field tends to be more concrete than missions. \n\n  `work_field_code1` is the main work field code; `work_field_code2` is an alternative code for the work field if the ONGO's work touches on overlapping fields\n\n  The field categories listed on Article 3 of the law. \n\n  > Overseas NGOs may, in accordance with the provisions of this Law, engage in undertakings of benefit to the public in the areas of the economy, education, science, culture, health, sports and environmental protection, as well as in the areas of poverty and disaster relief.\n\n  Earlier fields used:\n  \n  - Commerce and Trade Promotion\n  - Science and Technology\n  - Education\n  - Charity and Public Benefit\n  - Environment\n  - Industry Promotion and Self-regulation\n  - Public Health\n  - International Exchange\n  - Multiple Fields (usually grant-making foundations)\n\n\n# Cross checking of ONGO work field coding\n\nGoogle translation of the work field statements (disclosed in Chinese) are included. Researcher 1 is the main coder of the work field. When there is some ambiguity of the coding, Researcher 1 marks \"TRUE\" in the `coding_need_check` document and Researcher 2 cross check the coding of the work field. \n\n\n\n# Work Field coding notes\n\n**Decided by how the work fields of registered NGO ROs cluster**\n\n- **[Economy and trade]**\n\n- **[Environment]** (including animal protection)\n\n- **[Education]** (including youth development and international cultural exchange)\n\n- **[Charity and humanitarian]** poverty alleviation, disaster relief, etc., including rural development and social work\n  If rural development is researched at the macroeconomics level, coded as science and technology, eg. #375\n  \n- **[Science and technology]**\n\n- **[Industry association]**\n\n- **[Health]** public health and health care system support (professional training)\n\n- **[Arts and Culture]** including sports (noted as “sports” in `work_field_code2`) and international culture exchange\n\n- **[General]** usually grant-making organizations, Or working on general international communication, including among governments, Or working on multiple fields not overlapping\n\n(Chinese background) (ONGOs set up by Chinese communities abroad or by Chinese entities in foreign jurisdictions). Such ONGOs tend to have strong local connection with its origins. Not sure yet if should be kept as a separate variable. Now coded only in work_field_code2. \n(equality)\n\n\nOnly in `work_field_code2`, aim to right-based Charity and humanitarian and non-right-based Charity and humanitarian orgs\n\n\n# Coding rules used and notes\n\n1. Education vs. Charity\n\n   If charitable activities are all education related, e.g. building schools, donating education facilities and books, coded as education\n\n   If the aids provided include other community support, e.g. building bridges, roads, medical facilities, coded as charity\n\n2. Economy and trade vs. Industry association\n\n   If the trade promoted is focused on a particular industry (poultry, grains etc.), coded as industry association\n\n3. Arts and culture vs. education\n\n   Now includes sports organizations too. \n\n4. Industry association vs. health, science and technology, arts and culture\n\n   There are professional association on health providers and certain techniques. Coded as health, science & technology at the moment because they also conducting activities of promoting certain techniques . And their nature of work can be quite different from industry associations on grains, wines, pecans etc. The are more of a professional association with specialized expertise. \n\n   Same as arts and culture organizations: e.g., ballet dancer association \n\n   Exception: specialized association coded as industry associations if only serving the member companies #91\n\n5. Health vs. Charity \n\n   If only providing medical aids to underprivileged communities, not building schools etc., coded as health \n\n6. Charity vs. General \n\n   If multiple work, e.g., poverty alleviation, education, health can be encompassed by Charity and humanitarian, then former, or latter (e.g.)\n\n7. International exchange category is dropped because it is assimilated by other fields, i.e., international exchange in education, arts and culture, science and technology\n\n8. Limitations: The sample/population only covers those INGOs that got successfully registered\n\n9. Chinese background, equality and sports are coded in `work_field_code2`, we can derive separate variables for them if needed \n\n10. Multiple ROs are coded based on the overall work area spans of the mother organization, not the specific RO, so ensure the work_area is consistent across ROs\n\n\n# Clean data\n\n## Province names\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nprovince_list <- ongo |> \n  group_by(province_cn) |> \n  summarise(province_cn = first(province_cn)) |>\n  drop_na() |> #de-registered ones\n  pull(province_cn)\nprovince_list\n##  [1] \"上海\" \"云南\" \"内蒙\" \"北京\" \"吉林\" \"四川\" \"天津\" \"宁夏\" \"安徽\" \"山东\"\n## [11] \"广东\" \"广西\" \"江苏\" \"江西\" \"河北\" \"河南\" \"浙江\" \"海南\" \"湖北\" \"湖南\"\n## [21] \"甘肃\" \"福建\" \"西藏\" \"贵州\" \"辽宁\" \"重庆\" \"陕西\" \"青海\" \"黑龙\"\n```\n:::\n\n\nThere are totally 29 provinces (including provincial-level cities e.g. Beijing and Shanghai) that have ONGO rep offices.\n\nThe maximum number of provinces that a RO can possible operate in is 32. \n\n## English organization names\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntable(is.na(ongo$org_name_en))\n## \n## FALSE  TRUE \n##   499   134\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}